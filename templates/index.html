applyFrameBtn.addEventListener("click", function() {
    if (!cropper) return;

    // Get cropped image data
    const croppedCanvas = cropper.getCroppedCanvas({
        width: 500,
        height: 500
    });

    // Draw final image with frame
    const ctx = canvasResult.getContext("2d");
    canvasResult.width = 500;
    canvasResult.height = 500;

    // Draw the cropped image
    ctx.drawImage(croppedCanvas, 0, 0, 500, 500);

    // Draw the frame
    const frameImg = new Image();
    frameImg.src = "static/frame.png";
    frameImg.onload = function() {
        ctx.drawImage(frameImg, 0, 0, 500, 500);

        // Add the logo at the bottom
        const logoImg = new Image();
        logoImg.src = "static/logo.png";
        logoImg.onload = function() {
            const logoHeight = 50; // Adjust the height of the logo
            const logoWidth = (logoImg.width / logoImg.height) * logoHeight; // Maintain the aspect ratio
            const logoX = (500 - logoWidth) / 2; // Center the logo horizontally
            const logoY = 500 - logoHeight - 10; // Place the logo 10px above the bottom

            ctx.drawImage(logoImg, logoX, logoY, logoWidth, logoHeight);
            
            // Show download button
            const finalImage = canvasResult.toDataURL("image/png");
            downloadBtn.href = finalImage;
            downloadBtn.style.display = "block";
        };
    };
});
